<%- layout('layouts/boilerplate.ejs')  %>
<form action="/products/<%=product._id%>?_method=PUT" method="POST" enctype="multipart/form-data" class="validated-form"
    novalidate>
    <table class="table w-50 mx-auto mt-2">
        <thead>
            <tr>
                <th>
                    <div>
                        <label class="form-label" for="title">Title</label>
                    </div>
                </th>
                <td scope="col">
                    <div>
                        <input class="form-control" type="text" name="product[title]" id="title"
                            value="<%= product.title %>" required>
                        <div class="valid-feedback">
                            Looks good!
                        </div>
                    </div>
                </td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th>
                    <div>
                        <label class="form-label" for="price">Price</label>
                    </div>
                </th>
                <td scope="col">
                    <div>
                        <input class="form-control" type="number" name="product[price]" id="price"
                            value="<%= product.price %>" required>
                        <div class="valid-feedback">
                            Looks good!
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <th>
                    <div>
                        <label class="form-label" for="description">Description</label>
                    </div>
                </th>
                <td scope="col">
                    <div>
                        <input class="form-control" type="text" name="product[description]" id="description"
                            value="<%= product.description %>">
                        <div class="valid-feedback">
                            Looks good!
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <th>
                    <div>
                        <label class="form-label" for="fulldetail">Full Detail</label>
                    </div>
                </th>
                <td scope="col">
                    <div>
                        <textarea class="form-control" type="text" name="product[fullDetail]" id="fulldetail" rows="5"
                            required><%= product.fullDetail%> </textarea>
                        <div class="valid-feedback">
                            Looks good!
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <th>
                    <div>
                        <label class="form-label" for="category">Category</label>
                    </div>
                </th>
                <td scope="col">
                    <div>
                        <!-- <input class="form-control" type="text" name="product[category]" id="category"> -->
                        <select class="form-select" aria-label="Default select example" id="category"
                            name="product[category]">
                            <option value="smartphones" <%= product.category === 'smartphones' ? 'selected' : '' %>>
                                Smartphones</option>
                            <option value="consoles" <%= product.category === 'consoles' ? 'selected' : '' %>>Consoles
                            </option>
                            <option value="games" <%= product.category === 'games' ? 'selected' : '' %>>Games</option>
                        </select>
                        <div class="valid-feedback">
                            Looks good!
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <th>Images</th>
                <td>
                    <div class="mb-3">
                        <input class="form-control" type="file" id="formFileMultiple" name="image" multiple>
                        <div class="valid-feedback">
                            Looks good!
                        </div>
                    </div>
                    <% product.images.forEach(function (img, i) { %>
                    <div class="d-inline-flex flex-row mb-2 me-1">
                        <div>
                            <img src="<%= img.thumbnail %>" class="img-thumbnail" alt="">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="<%=img.filename%>"
                                    name="deleteImages[]" id="image-<%=i%>">
                                <label class="form-check-label" for="image-<%=i%>">
                                    Delete?
                                </label>
                            </div>
                        </div>
                    </div>
                    <% }) %>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table w-50 mx-auto">  
        <thead>
            <div class="mb-3 offset-5">
                <button class="btn btn-success">Update Product</button>
                <a class="ms-5 link-primary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                    href="/products/<%=product._id%>">Back to Product</a>
            </div>
        </thead>
    </table>
</form>